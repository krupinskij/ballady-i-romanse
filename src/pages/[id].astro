---
import type { Ballad } from '@model';
import Layout from '@layouts/Layout.astro';

export async function getStaticPaths() {
  const ballads: Ballad[] = await Astro.glob('/src/assets/ballads/*.json');

  return ballads.map((ballad) => ({
    params: { id: ballad.id },
    props: ballad,
  }));
}

const { title, notes, motto, contents } = Astro.props;
---

<Layout title={`${title} | Ballady i Romanse`}>
  <header class="mb-8">
    <h1 class="font-cursive text-center text-8xl leading-tight">
      {title}
    </h1>
    {notes && notes.map((note) => <span class="block text-center text-xs">{note}</span>)}
  </header>
  <main>
    <article class="w-max mx-auto">
      {
        motto && (
          <section class="mb-4">
            <pre class="text-right font-default text-sm">{motto.text}</pre>
            <pre class="text-right font-default text-sm mb-2">{motto.author}</pre>
            {motto.translation && (
              <pre class="text-right font-default text-sm">{motto.translation}</pre>
            )}
          </section>
        )
      }
      {
        contents.map((content) => (
          <section class="mb-8">
            {content.character && <h2 class="font-medium text-base">{content.character}:</h2>}
            <pre class="font-default text-base">{content.text}</pre>
          </section>
        ))
      }
    </article>
  </main>
</Layout>
